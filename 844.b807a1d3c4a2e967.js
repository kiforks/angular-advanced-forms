"use strict";(self.webpackChunkangular_advanced_forms=self.webpackChunkangular_advanced_forms||[]).push([[844],{8844:(K,p,a)=>{a.r(p),a.d(p,{ReactiveFormComponent:()=>H});var c=a(6895),i=a(433),f=a(8505),y=a(8675),h=a(4482),g=a(5403),N=a(8737),A=a(9300),v=a(8848);function x(t){const r=t.get("password"),o=t.get("confirmPassword"),n={passwordShouldMatch:{mismatch:!0}};return r?.value===o?.value?null:(o?.setErrors(n),n)}var F=a(5584),U=a(2671),T=a(5504),e=a(1571),Z=a(9646),q=a(4986),P=a(7272),C=a(5698),I=a(5032),w=a(9718),R=a(5577);function k(t,r){return r?o=>(0,P.z)(r.pipe((0,C.q)(1),function O(){return(0,h.e)((t,r)=>{t.subscribe((0,g.x)(r,I.Z))})}()),o.pipe(k(t))):(0,R.z)((o,n)=>t(o,n).pipe((0,C.q)(1),(0,w.h)(o)))}var S=a(5963);let M=(()=>{class t{getSkills(){return(0,Z.of)(["angular","typescript","git","docker"]).pipe(function Y(t,r=q.z){const o=(0,S.H)(t,r);return k(()=>o)}(1e3))}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var J=a(4004),V=a(262),E=a(529);let G=(()=>{class t{constructor(o){this.httpClient=o}validate({value:o}){const n={uniqueName:{isTaken:!0}},l={uniqueName:{unknownError:!0}};return this.httpClient.get(`https://jsonplaceholder.typicode.com/users?username=${o}`).pipe((0,J.U)(({length:s})=>0===s?null:n),(0,V.K)(()=>(0,Z.of)(l)))}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(E.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Q=a(6750);function _(t,r){1&t&&(e.TgZ(0,"div",41),e._uU(1,"Checking nickname..."),e.qZA())}function B(t,r){if(1&t&&(e.ynx(0),e.YNc(1,_,2,0,"div",40),e.BQk()),2&t){const o=r.ngIf;e.xp6(1),e.Q6J("ngIf",o.pending)}}function L(t,r){if(1&t&&(e.TgZ(0,"option",42),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("value",o),e.xp6(1),e.Oqu(o)}}function $(t,r){if(1&t&&(e.TgZ(0,"option",42),e._uU(1),e.qZA()),2&t){const o=r.$implicit;e.Q6J("value",o),e.xp6(1),e.Oqu(o)}}function D(t,r){if(1&t){const o=e.EpF();e.TgZ(0,"div",43)(1,"label",44),e._uU(2,"Phone number"),e.qZA(),e.TgZ(3,"div",45)(4,"select",46),e.YNc(5,$,2,2,"option",15),e.qZA(),e._UZ(6,"input",47),e.TgZ(7,"button",48),e.NdJ("click",function(){const s=e.CHM(o).index,u=e.oxw();return e.KtG(u.onRemovePhoneClick(s))}),e._uU(8,"-"),e.qZA()()()}if(2&t){const o=r.index,n=e.oxw();e.Q6J("formGroupName",o),e.xp6(1),e.MGl("for","phone-",o,""),e.xp6(4),e.Q6J("ngForOf",n.phoneLabels),e.xp6(1),e.MGl("id","phone-",o,"")}}function z(t,r){if(1&t&&(e.TgZ(0,"div",50),e._UZ(1,"input",51),e.TgZ(2,"label",44),e._uU(3),e.ALo(4,"titlecase"),e.qZA()()),2&t){const o=r.$implicit;e.xp6(1),e.Q6J("formControlName",o)("id",o),e.xp6(1),e.Q6J("for",o),e.xp6(1),e.Oqu(e.lcZ(4,4,o))}}function j(t,r){if(1&t&&(e.ynx(0),e.YNc(1,z,5,6,"div",49),e.BQk()),2&t){const o=r.ngIf;e.xp6(1),e.Q6J("ngForOf",o)}}function W(t,r){1&t&&(e.TgZ(0,"p"),e._uU(1,"Skills are loading..."),e.qZA())}let H=(()=>{class t{constructor(o,n,l,s){this.userSkillsService=o,this.formBuilder=n,this.uniqueNicknameValidator=l,this.cdr=s,this.phoneLabels=["Main","Mobile","Work","Home"],this.years=this.getYears(),this.form=this.formBuilder.group({firstName:["",[i.kI.required,i.kI.minLength(4),(0,v.$)(["test","dummy"])]],lastName:["",[i.kI.required,i.kI.minLength(2)]],nickname:["",{validators:[i.kI.required,i.kI.minLength(2),i.kI.pattern(/^[\w.]+$/),(0,v.$)(["dummy","test"])],asyncValidators:[this.uniqueNicknameValidator.validate.bind(this.uniqueNicknameValidator)],updateOn:"blur"}],email:["",[i.kI.email,i.kI.required]],yearOfBirth:this.formBuilder.nonNullable.control(0,i.kI.required),passport:["",[i.kI.pattern(/^[A-Z]{2}[0-9]{6}$/)]],address:this.formBuilder.nonNullable.group({fullAddress:["",i.kI.required],city:["",i.kI.required],postCode:["",i.kI.required]}),phones:this.formBuilder.array([this.formBuilder.group({label:this.formBuilder.nonNullable.control(this.phoneLabels[0]),phone:""})]),skills:this.formBuilder.record({}),password:this.formBuilder.group({password:["",[i.kI.required,i.kI.minLength(6)]],confirmPassword:""},{validators:x})})}ngOnInit(){this.setData()}ngOnDestroy(){this.ageValidators.unsubscribe(),this.formPendingState.unsubscribe()}onAddPhoneClick(){this.form.controls.phones.insert(0,this.formBuilder.group({label:this.formBuilder.control(this.phoneLabels[0],{nonNullable:!0}),phone:this.formBuilder.control("")}))}onRemovePhoneClick(o){this.form.controls.phones.removeAt(o)}onSubmit(o){console.log(o),console.log(this.form.value),!this.form.invalid&&(this.initialFormValues=this.form.value,this.formGroup.resetForm(this.form.value))}onReset(o){console.log(o),o.preventDefault(),this.formGroup.resetForm({})}getYears(){const o=(new Date).getUTCFullYear();return Array(o-(o-40)).fill("").map((n,l)=>o-l)}buildSkillControls(o){o.forEach(n=>this.form.controls.skills.addControl(n,this.formBuilder.control(!1,{nonNullable:!0})))}isAdult(o){return(new Date).getFullYear()-o>=18}setData(){const{yearOfBirth:o,passport:n}=this.form.controls;this.skills$=this.userSkillsService.getSkills().pipe((0,f.b)(l=>this.buildSkillControls(l)),(0,f.b)(()=>this.initialFormValues=this.form.value)),this.ageValidators=o.valueChanges.pipe((0,f.b)(()=>n.markAsDirty()),(0,y.O)(o.value)).subscribe(l=>{this.isAdult(l)?n.addValidators(i.kI.required):n.removeValidators(i.kI.required),n.updateValueAndValidity()}),this.formPendingState=this.form.statusChanges.pipe(function b(t,r=null){return r=r??t,(0,h.e)((o,n)=>{let l=[],s=0;o.subscribe((0,g.x)(n,u=>{let m=null;s++%r==0&&l.push([]);for(const d of l)d.push(u),t<=d.length&&(m=m??[],m.push(d));if(m)for(const d of m)(0,N.P)(l,d),n.next(d)},()=>{for(const u of l)n.next(u);n.complete()},void 0,()=>{l=null}))})}(2,1),(0,A.h)(([l])=>"PENDING"===l)).subscribe(()=>this.cdr.markForCheck())}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(M),e.Y36(i.qu),e.Y36(G),e.Y36(e.sBO))},t.\u0275cmp=e.Xpm({type:t,selectors:[["reactive-form"]],viewQuery:function(o,n){if(1&o&&e.Gf(i.sg,5),2&o){let l;e.iGM(l=e.CRH())&&(n.formGroup=l.first)}},standalone:!0,features:[e.jDz,e.zW0([Q.u])],decls:74,vars:9,consts:[[1,"form",3,"formGroup","reset","ngSubmit"],[1,"form-field"],["for","name"],["formControlName","firstName","type","text","id","name","placeholder","Enter your name"],["for","last-name"],["formControlName","lastName","type","text","id","last-name","placeholder","Enter your last name"],["for","nickname"],["formControlName","nickname","type","text","id","nickname","placeholder","Come up with a nickname"],[4,"ngIf"],["for","email"],["formControlName","email","type","email","id","email","placeholder","Provide your email"],[1,"form-field-inline-group"],[1,"form-field","form-field-small"],["for","year-of-birth"],["formControlName","yearOfBirth","id","year-of-birth"],[3,"value",4,"ngFor","ngForOf"],["for","passport"],["formControlName","passport","type","text","id","passport","placeholder","Provide Passport Data"],["formGroupName","address"],["for","full-address"],["formControlName","fullAddress","type","text","id","full-address","placeholder","Street name and house number"],["for","city"],["formControlName","city","type","text","id","city","placeholder","City"],["for","post-code"],["formControlName","postCode","type","number","id","post-code","placeholder","Post code"],["formArrayName","phones"],[1,"control-buttons"],["type","button",1,"add-button",3,"click"],["class","form-field",3,"formGroupName",4,"ngFor","ngForOf"],["formGroupName","skills"],[4,"ngIf","ngIfElse"],["formGroupName","password",3,"errorViewContainerRef"],["for","password"],["formControlName","password","type","password","id","password","placeholder","Enter password..."],["for","confirm-password"],["validationNoErrors","","formControlName","confirmPassword","type","password","id","confirm-password","placeholder","Enter password..."],["validationErrorViewContainer",""],["container","validationErrorViewContainer"],["type","reset",1,"reset-button"],["loading",""],["class","input-info",4,"ngIf"],[1,"input-info"],[3,"value"],[1,"form-field",3,"formGroupName"],[3,"for"],[1,"control-container"],["formControlName","label",1,"phone-label-dropdown"],["formControlName","phone","type","text","placeholder","Enter Phone Number",3,"id"],["type","button",1,"remove-button",3,"click"],["class","skill-container",4,"ngFor","ngForOf"],[1,"skill-container"],["type","checkbox",3,"formControlName","id"]],template:function(o,n){if(1&o&&(e.TgZ(0,"form",0),e.NdJ("reset",function(s){return n.onReset(s)})("ngSubmit",function(s){return n.onSubmit(s)}),e.TgZ(1,"div",1)(2,"label",2),e._uU(3,"First Name"),e.qZA(),e._UZ(4,"input",3),e.qZA(),e.TgZ(5,"div",1)(6,"label",4),e._uU(7,"Last Name"),e.qZA(),e._UZ(8,"input",5),e.qZA(),e.TgZ(9,"div",1)(10,"label",6),e._uU(11,"Nickname"),e.qZA(),e._UZ(12,"input",7),e.YNc(13,B,2,1,"ng-container",8),e.qZA(),e.TgZ(14,"div",1)(15,"label",9),e._uU(16,"Email"),e.qZA(),e._UZ(17,"input",10),e.qZA(),e.TgZ(18,"div",11)(19,"div",12)(20,"label",13),e._uU(21,"Year of birth"),e.qZA(),e.TgZ(22,"select",14),e.YNc(23,L,2,2,"option",15),e.qZA()(),e.TgZ(24,"div",12)(25,"label",16),e._uU(26,"Passport Number"),e.qZA(),e._UZ(27,"input",17),e.qZA()(),e.TgZ(28,"fieldset",18)(29,"legend"),e._uU(30,"Address"),e.qZA(),e.TgZ(31,"div",1)(32,"label",19),e._uU(33,"Full Address"),e.qZA(),e._UZ(34,"input",20),e.qZA(),e.TgZ(35,"div",1)(36,"label",21),e._uU(37,"City"),e.qZA(),e._UZ(38,"input",22),e.qZA(),e.TgZ(39,"div",1)(40,"label",23),e._uU(41,"Post Code"),e.qZA(),e._UZ(42,"input",24),e.qZA()(),e.TgZ(43,"fieldset",25)(44,"legend"),e._uU(45,"Phones"),e.qZA(),e.TgZ(46,"div",26)(47,"button",27),e.NdJ("click",function(){return n.onAddPhoneClick()}),e._uU(48,"+"),e.qZA()(),e.YNc(49,D,9,4,"div",28),e.qZA(),e.TgZ(50,"fieldset",29)(51,"legend"),e._uU(52,"User Skills"),e.qZA(),e.YNc(53,j,2,1,"ng-container",30),e.ALo(54,"async"),e.qZA(),e.TgZ(55,"fieldset",31)(56,"legend"),e._uU(57,"Password"),e.qZA(),e.TgZ(58,"div",1)(59,"label",32),e._uU(60,"Create Password"),e.qZA(),e._UZ(61,"input",33),e.qZA(),e.TgZ(62,"div",1)(63,"label",34),e._uU(64,"Confirm Password"),e.qZA(),e._UZ(65,"input",35),e.GkF(66,36,37),e.qZA()(),e.TgZ(68,"button"),e._uU(69,"Save"),e.qZA(),e.TgZ(70,"button",38),e._uU(71,"Reset"),e.qZA()(),e.YNc(72,W,2,0,"ng-template",null,39,e.W1O)),2&o){const l=e.MAs(67),s=e.MAs(73);e.Q6J("formGroup",n.form),e.xp6(13),e.Q6J("ngIf",n.form.controls.nickname),e.xp6(10),e.Q6J("ngForOf",n.years),e.xp6(26),e.Q6J("ngForOf",n.form.controls.phones.controls),e.xp6(4),e.Q6J("ngIf",e.lcZ(54,7,n.skills$))("ngIfElse",s),e.xp6(2),e.Q6J("errorViewContainerRef",l.viewContainerRef)}},dependencies:[c.ez,c.sg,c.O5,c.Ov,c.rS,i.UX,i._Y,i.YN,i.Kr,i.Fj,i.wV,i.Wl,i.EJ,i.JJ,i.JL,i.sg,i.u,i.x0,i.CE,F.I,U.m,T.P],styles:["[_nghost-%COMP%]{display:flex;flex-grow:1;justify-content:center;align-items:center;width:100%}",".form[_ngcontent-%COMP%]{min-width:395px}.form-field[_ngcontent-%COMP%]{width:100%;height:93px}.form-field-small[_ngcontent-%COMP%]{max-width:48%}.form-field-inline-group[_ngcontent-%COMP%]{display:flex;justify-content:space-between}",".add-button[_ngcontent-%COMP%]{width:46px;padding:5px}.control-buttons[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-bottom:var(--spacing-step)}.control-container[_ngcontent-%COMP%]{display:flex;align-items:center}.remove-button[_ngcontent-%COMP%]{width:50px;min-width:45px;margin:0 0 0 10px;color:var(--color-error);background-color:transparent;border-color:var(--color-error)}.phone-label-dropdown[_ngcontent-%COMP%]{width:110px;margin-right:var(--spacing-step)}.skill-container[_ngcontent-%COMP%]{display:flex;align-items:center}"],changeDetection:0}),t})()}}]);